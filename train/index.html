<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astral Express - Welcome</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div id="welcome-screen" class="welcome-container">
        <div class="welcome-glow"></div>
        <h1 class="welcome-title">Welcome to the Astral Express</h1>
        <p class="welcome-text">Enter the password to board the train:</p>
        <div class="input-container">
            <input type="password" id="password-input" placeholder="Enter password" class="password-input">
            <button id="submit-btn" class="submit-btn">Board Train</button>
        </div>
        <p id="message" class="message"></p>
        <p id="hint" class="hint" style="display: none;">Hint: It's a loving message to someone special.</p>
    </div>

    <div id="loading-screen" class="loading-container" style="display: none;">
        <svg width="100%" height="100%" viewBox="0 0 1600 900" class="full-screen-train">
            <defs>
                <!-- Deep space -->
                <radialGradient id="spaceGradient" cx="50%" cy="50%" r="70%">
                    <stop offset="0%" stop-color="#02030a" />
                    <stop offset="40%" stop-color="#050816" />
                    <stop offset="100%" stop-color="#010208" />
                </radialGradient>

                <!-- Nebula glows -->
                <radialGradient id="nebulaPink" cx="15%" cy="25%" r="35%">
                    <stop offset="0%" stop-color="rgba(233,69,96,0.65)" />
                    <stop offset="100%" stop-color="transparent" />
                </radialGradient>
                <radialGradient id="nebulaBlue" cx="85%" cy="35%" r="40%">
                    <stop offset="0%" stop-color="rgba(116,185,255,0.5)" />
                    <stop offset="100%" stop-color="transparent" />
                </radialGradient>
                <radialGradient id="nebulaTeal" cx="40%" cy="80%" r="30%">
                    <stop offset="0%" stop-color="rgba(85,239,196,0.45)" />
                    <stop offset="100%" stop-color="transparent" />
                </radialGradient>

                <!-- Train body + edges -->
                <linearGradient id="trainBodyGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#feca57" />
                    <stop offset="30%" stop-color="#e94560" />
                    <stop offset="65%" stop-color="#9b59b6" />
                    <stop offset="100%" stop-color="#55efc4" />
                </linearGradient>
                <linearGradient id="trainEdgeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="#ffffff" stop-opacity="0.9" />
                    <stop offset="100%" stop-color="#feca57" stop-opacity="0.05" />
                </linearGradient>

                <!-- Strong glow for astral feel -->
                <filter id="strongGlow">
                    <feGaussianBlur stdDeviation="8" result="blur"/>
                    <feColorMatrix in="blur" type="matrix"
                        values="1 0 0 0 0
                                0 1 0 0 0
                                0 0 1 0 0
                                0 0 0 1 0"/>
                    <feMerge>
                        <feMergeNode in="blur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>

                <!-- Star streaks -->
                <linearGradient id="streakGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#ffffff" stop-opacity="1" />
                    <stop offset="100%" stop-color="#ffffff" stop-opacity="0" />
                </linearGradient>
            </defs>

            <!-- Deep space background -->
            <rect width="1600" height="900" fill="url(#spaceGradient)"/>

            <!-- Nebulas -->
            <rect width="1600" height="900" fill="url(#nebulaPink)" opacity="0.5">
                <animate attributeName="opacity" values="0.2;0.5;0.2" dur="6s" repeatCount="indefinite"/>
            </rect>
            <rect width="1600" height="900" fill="url(#nebulaBlue)" opacity="0.5">
                <animate attributeName="opacity" values="0.15;0.45;0.15" dur="7s" repeatCount="indefinite"/>
            </rect>
            <rect width="1600" height="900" fill="url(#nebulaTeal)" opacity="0.5">
                <animate attributeName="opacity" values="0.1;0.4;0.1" dur="5.5s" repeatCount="indefinite"/>
            </rect>

            <!-- Starfield -->
            <g>
                <!-- static stars -->
                <circle cx="100" cy="100" r="2" fill="#ffffff" opacity="0.8"/>
                <circle cx="300" cy="200" r="1.5" fill="#ffffff" opacity="0.6"/>
                <circle cx="500" cy="80" r="2" fill="#ffffff" opacity="0.8"/>
                <circle cx="900" cy="160" r="1.5" fill="#ffffff" opacity="0.7"/>
                <circle cx="1200" cy="220" r="2" fill="#ffffff" opacity="0.9"/>
                <circle cx="1400" cy="60" r="1.5" fill="#ffffff" opacity="0.6"/>

                <!-- twinkling -->
                <circle cx="250" cy="400" r="2" fill="#ffffff">
                    <animate attributeName="opacity" values="1;0.2;1" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="750" cy="300" r="2" fill="#ffffff">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="1.8s" repeatCount="indefinite"/>
                </circle>
                <circle cx="1450" cy="500" r="2" fill="#ffffff">
                    <animate attributeName="opacity" values="1;0.1;1" dur="2.3s" repeatCount="indefinite"/>
                </circle>
            </g>

            <!-- Warp streaks -->
            <g>
                <rect x="-200" y="150" width="300" height="2" fill="url(#streakGradient)" opacity="0.8">
                    <animateTransform attributeName="transform" type="translate" values="-200,0;1800,0" dur="1.2s" repeatCount="indefinite"/>
                </rect>
                <rect x="-400" y="260" width="400" height="3" fill="url(#streakGradient)" opacity="0.6">
                    <animateTransform attributeName="transform" type="translate" values="-400,0;1800,0" dur="1.6s" repeatCount="indefinite"/>
                </rect>
                <rect x="-300" y="420" width="260" height="2" fill="url(#streakGradient)" opacity="0.7">
                    <animateTransform attributeName="transform" type="translate" values="-300,0;1800,0" dur="1.1s" repeatCount="indefinite"/>
                </rect>
                <rect x="-500" y="580" width="450" height="3" fill="url(#streakGradient)" opacity="0.5">
                    <animateTransform attributeName="transform" type="translate" values="-500,0;1800,0" dur="1.9s" repeatCount="indefinite"/>
                </rect>
            </g>

            <!-- Time vortex -->
            <g transform="translate(800,450)">
                <circle r="40" fill="none" stroke="#feca57" stroke-width="2" opacity="0.5">
                    <animate attributeName="r" values="40;260;40" dur="6s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.5;0.1;0.5" dur="6s" repeatCount="indefinite"/>
                </circle>
                <circle r="25" fill="none" stroke="#55efc4" stroke-width="1.5" opacity="0.6">
                    <animate attributeName="r" values="25;200;25" dur="4.5s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.6;0.15;0.6" dur="4.5s" repeatCount="indefinite"/>
                </circle>
            </g>

            <!-- Astral Express bullet-train style: sleek, fast, still geometric (not too smooth) -->
            <g class="train-group">
                <!-- Tracks -->
                <g class="rails">
                    <!-- Base rail line -->
                    <rect x="-600" y="452" width="2600" height="3" fill="#3c3c3c" opacity="0.9" />
                    <!-- Motion sleepers -->
                    <g fill="#252525">
                        <rect x="-400" y="456" width="24" height="5">
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;2600,0" dur="0.35s" repeatCount="indefinite" />
                        </rect>
                        <rect x="-340" y="456" width="24" height="5">
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;2600,0" dur="0.35s" repeatCount="indefinite" />
                        </rect>
                        <rect x="-280" y="456" width="24" height="5">
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;2600,0" dur="0.35s" repeatCount="indefinite" />
                        </rect>
                        <rect x="-220" y="456" width="24" height="5">
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;2600,0" dur="0.35s" repeatCount="indefinite" />
                        </rect>
                    </g>
                </g>

                <!-- Overall motion: fast, continuous -->
                <g id="train-motion">
                    <!-- Horizontal glide -->
                    <animateTransform attributeName="transform" type="translate"
                        values="-900,0; 2000,0" dur="5s" repeatCount="indefinite"
                        keyTimes="0;1" calcMode="spline"
                        keySplines="0.45 0 0.55 1" />
                    <!-- Slight vertical jitter to feel alive -->
                    <animateTransform attributeName="transform" type="translate"
                        additive="sum"
                        values="0,0;0,-1.2;0,0;0,0.8;0,0"
                        dur="1s" repeatCount="indefinite" />

                    <!-- Nose / engine: bullet shape with hard geometry -->
                    <g class="engine">
                        <!-- Shadow -->
                        <ellipse cx="220" cy="444" rx="120" ry="12" fill="rgba(0,0,0,0.42)" />
                        <!-- Main body top -->
                        <polygon
                            points="80,315 340,315 380,330 395,350 395,378 80,378"
                            fill="#14151f"
                            stroke="#feca57" stroke-width="2" />
                        <!-- Lower panel -->
                        <polygon
                            points="80,378 395,378 385,398 90,398"
                            fill="#05060c"
                            stroke="#feca57" stroke-width="1.4" />
                        <!-- Sharp nose cap -->
                        <polygon
                            points="340,315 420,326 430,340 430,360 395,350 380,330"
                            fill="#1b1f2b"
                            stroke="#ffffff" stroke-width="1.2" />

                        <!-- Angular canopy windows -->
                        <polygon
                            points="105,323 172,323 182,337 110,337"
                            fill="#050816"
                            stroke="#55efc4" stroke-width="1" />
                        <polygon
                            points="185,323 252,323 262,337 192,337"
                            fill="#050816"
                            stroke="#55efc4" stroke-width="1" />

                        <!-- Accent speed stripes -->
                        <rect x="100" y="350" width="210" height="5" fill="#e94560" />
                        <rect x="100" y="362" width="190" height="3" fill="#55efc4" />

                        <!-- Headlight slice -->
                        <polygon
                            points="420,336 450,342 450,354 420,360"
                            fill="#feca57">
                            <animate attributeName="opacity"
                                values="0.3;1;0.3" dur="0.6s"
                                repeatCount="indefinite" />
                        </polygon>
                        <!-- Light beam -->
                        <polygon
                            points="450,340 620,350 620,348 450,352"
                            fill="url(#streakGradient)" opacity="0.95">
                            <animate attributeName="opacity"
                                values="0.1;0.5;0.15" dur="0.6s"
                                repeatCount="indefinite" />
                        </polygon>

                        <!-- Engine wheels / bogies (hinted, not cartoon-round) -->
                        <g>
                            <g>
                                <rect x="135" y="402" width="30" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                                <circle cx="150" cy="407" r="5" fill="#999" />
                                <circle cx="170" cy="407" r="5" fill="#999" />
                            </g>
                            <g>
                                <rect x="245" y="402" width="30" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                                <circle cx="260" cy="407" r="5" fill="#999" />
                                <circle cx="278" cy="407" r="5" fill="#999" />
                            </g>
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;0,0.4;0,0" dur="0.25s"
                                repeatCount="indefinite" />
                        </g>
                    </g>

                    <!-- Car 1: long sleek passenger section -->
                    <g class="car car-1">
                        <!-- Shadow -->
                        <ellipse cx="520" cy="444" rx="120" ry="11"
                            fill="rgba(0,0,0,0.38)" />
                        <!-- Body -->
                        <polygon
                            points="410,320 720,320 735,332 735,380 410,380"
                            fill="#151821"
                            stroke="#feca57" stroke-width="1.8" />
                        <!-- Roof -->
                        <polygon
                            points="420,305 710,305 720,320 410,320"
                            fill="#1d2330"
                            stroke="#ffffff" stroke-width="1" />
                        <!-- Windows, spaced like HSR -->
                        <g fill="#050816" stroke="#74b9ff" stroke-width="1">
                            <rect x="430" y="325" width="40" height="18" />
                            <rect x="478" y="325" width="40" height="18" />
                            <rect x="526" y="325" width="40" height="18" />
                            <rect x="574" y="325" width="40" height="18" />
                            <rect x="622" y="325" width="40" height="18" />
                            <rect x="670" y="325" width="40" height="18" />
                        </g>
                        <!-- Stripes -->
                        <rect x="425" y="352" width="280" height="4" fill="#e94560" />
                        <rect x="425" y="364" width="260" height="3" fill="#9b59b6" />

                        <!-- Bogies -->
                        <g>
                            <g>
                                <rect x="455" y="404" width="34" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                            </g>
                            <g>
                                <rect x="620" y="404" width="34" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                            </g>
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;0,0.4;0,0" dur="0.25s"
                                repeatCount="indefinite" />
                        </g>
                    </g>

                    <!-- Car 2: rear car with subtle fin -->
                    <g class="car car-2">
                        <!-- Shadow -->
                        <ellipse cx="800" cy="444" rx="110" ry="10"
                            fill="rgba(0,0,0,0.34)" />
                        <!-- Body -->
                        <polygon
                            points="690,322 980,322 990,334 990,380 700,380"
                            fill="#151821"
                            stroke="#feca57" stroke-width="1.8" />
                        <!-- Roof -->
                        <polygon
                            points="700,307 965,307 975,322 690,322"
                            fill="#1d2330"
                            stroke="#ffffff" stroke-width="1" />
                        <!-- Windows -->
                        <g fill="#050816" stroke="#55efc4" stroke-width="1">
                            <rect x="705" y="327" width="40" height="18" />
                            <rect x="753" y="327" width="40" height="18" />
                            <rect x="801" y="327" width="40" height="18" />
                            <rect x="849" y="327" width="40" height="18" />
                            <rect x="897" y="327" width="40" height="18" />
                        </g>
                        <!-- Tail fin / light -->
                        <polygon
                            points="980,322 1010,324 1015,340 990,340"
                            fill="#e94560" />
                        <circle cx="1005" cy="348" r="4" fill="#feca57">
                            <animate attributeName="opacity"
                                values="0.2;0.9;0.2" dur="0.9s"
                                repeatCount="indefinite" />
                        </circle>

                        <!-- Bogies -->
                        <g>
                            <g>
                                <rect x="730" y="404" width="34" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                            </g>
                            <g>
                                <rect x="890" y="404" width="34" height="10" rx="2"
                                    fill="#141414" stroke="#777" stroke-width="1.5" />
                            </g>
                            <animateTransform attributeName="transform" type="translate"
                                values="0,0;0,0.4;0,0" dur="0.25s"
                                repeatCount="indefinite" />
                        </g>
                    </g>

                    <!-- Couplers between units -->
                    <g class="connectors"
                        stroke="#feca57" stroke-width="3"
                        stroke-linecap="round">
                        <line x1="395" y1="382" x2="410" y2="382" />
                        <line x1="720" y1="382" x2="690" y2="382" />
                    </g>
                </g>
            </g>

            <!-- Astral Express text -->
            <text x="600" y="100" text-anchor="middle" fill="#feca57" font-size="48" font-family="Arial, sans-serif" filter="url(#glow)">
                Astral Express
                <animate attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite"/>
            </text>
            <text x="600" y="140" text-anchor="middle" fill="#55efc4" font-size="24" font-family="Arial, sans-serif">
                Journey Through Time and Space
            </text>
        </svg>
    </div>

    <!-- Main menu: train interior with navigation stands -->
    <div id="main-menu" class="main-menu" style="display: none;">
        <div class="train-interior">
            <!-- Windows and ambient details -->
            <div class="train-window-strip">
                <div class="window"><div class="stars-layer"></div></div>
                <div class="window"><div class="stars-layer"></div></div>
                <div class="window"><div class="stars-layer"></div></div>
            </div>

            <div class="ceiling-lights">
                <div class="light"></div>
                <div class="light"></div>
                <div class="light"></div>
            </div>

            <div class="floor-gradient"></div>

            <!-- Navigation stands (Main Menu contents) -->
            <div id="map-stand" class="object-stand" data-tooltip="View route and destinations" data-target="map">
                <div class="stand-base"></div>
                <div class="stand-pole"></div>
                <div class="stand-screen stand-glow">
                    <div class="map-mini">
                        <div class="map-planet current"></div>
                        <div class="map-planet"></div>
                        <div class="map-planet"></div>
                        <div class="map-path"></div>
                    </div>
                    <div class="stand-label">Route Map</div>
                </div>
            </div>

            <div id="log-stand" class="object-stand" data-tooltip="Mission and travel logs" data-target="logs">
                <div class="stand-screen">
                    <div class="screen-lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="stand-label">Mission Log</div>
                </div>
            </div>

           <div id="inv-stand" class="object-stand" data-tooltip="Inventory and gifts" data-target="inventory">
               <div class="stand-base"></div>
               <div class="stand-pole"></div>
               <div class="locker-body">
                   <div class="locker-door"></div>
                   <div class="locker-lights">
                       <span></span><span></span><span></span>
                   </div>
               </div>
               <div class="stand-label">Inventory</div>
           </div>

           <!-- Inventory overlay: shows your attuned ticket when Belobog trial is complete -->
           <div id="inventory-overlay" class="inventory-overlay" style="display: none;">
               <div class="inventory-panel">
                   <div class="inventory-header">
                       <div class="inventory-title">Astral Express Inventory</div>
                       <div class="inventory-subtitle">Personal artifacts and boarding passes</div>
                   </div>
                   <div class="inventory-body">
                       <div class="inventory-ticket-header">Next Planet Ticket</div>
                       <div id="inventory-xianzhou-card" class="inventory-ticket-card locked">
                           <div class="ticket-label">Xianzhou Luofu Boarding Pass</div>
                           <div class="ticket-world">Xianzhou Luofu</div>
                           <div class="ticket-note">
                               Locked ‚Äî Clear the Belobog Oath to attune this pass.
                           </div>
                       </div>
                   </div>
                   <button id="inventory-close-btn" class="inventory-close-btn">Close Inventory</button>
               </div>
           </div>

            <div id="com-stand" class="object-stand" data-tooltip="Messages and connections" data-target="comms">
                <div class="stand-base"></div>
                <div class="stand-pole"></div>
                <div class="stand-screen">
                    <div class="wave"></div>
                    <div class="wave2"></div>
                    <div class="stand-label">Comms</div>
                </div>
            </div>

            <div id="sys-stand" class="object-stand" data-tooltip="Core settings" data-target="system">
                <div class="stand-base"></div>
                <div class="stand-pole"></div>
                <div class="stand-screen">
                    <div class="core-ring"></div>
                    <div class="core-orb"></div>
                    <div class="stand-label">System Core</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Planet selection overlay (opens when using Route Map in Main Menu) -->
    <div id="planet-selection" class="planet-portal" style="display: none;">
        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <div class="celestial-row">

            <!-- Planets arranged in half-heart constellation -->
            <div class="celestial-orb planet-option unlocked" data-planet="belobog">
                <div class="orb-glow"></div>
                <span class="orb-label">Belobog</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="xianzhou">
                <div class="orb-glow"></div>
                <span class="orb-label">Xianzhou Luofu</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="penacony">
                <div class="orb-glow"></div>
                <span class="orb-label">Penacony</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="jarilo">
                <div class="orb-glow"></div>
                <span class="orb-label">Jarilo-VI</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="herta">
                <div class="orb-glow"></div>
                <span class="orb-label">Herta Station</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="luofu">
                <div class="orb-glow"></div>
                <span class="orb-label">Luofu Sanctum</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="stellaron">
                <div class="orb-glow"></div>
                <span class="orb-label">Stellaron</span>
            </div>
            <div class="celestial-orb planet-option locked" data-planet="terminus">
                <div class="orb-glow"></div>
                <span class="orb-label">Terminus</span>
            </div>
        </div>

        <div class="portal-ui">
            <button id="back-to-menu" class="portal-back-btn">Back to Main Menu</button>
            <div id="planet-label" class="mini-label">Select your destination.</div>
        </div>
    </div>

    <!-- Destination portal screen (Belobog = castle interior with celestial relics) -->
    <div id="destination-portal" class="planet-portal belobog-castle" style="display: none;">
        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Castle interior framing -->
        <div class="castle-pillars">
            <div class="pillar"></div>
            <div class="pillar"></div>
            <div class="pillar"></div>
            <div class="pillar"></div>
        </div>
        <div class="castle-arch"></div>
        <div class="castle-emblem"></div>

        <!-- Three celestial content objects inside Belobog castle -->
        <div class="belobog-celestial-row">
            <!-- 1: Fill-in-the-blank mini-game trigger -->
            <div id="belobog-celestial-1" class="belobog-celestial" data-minigame="fill-blank">
                <div class="belobog-celestial-icon">‚úíÔ∏è</div>
                <div class="belobog-celestial-label">Oath Script</div>
                <div class="belobog-celestial-desc">
                    Complete the words that bind hearts across worlds.
                </div>
            </div>

            <!-- 2: Celestial object placeholder for future mini-game -->
            <div id="belobog-celestial-2" class="belobog-celestial" data-minigame="trial-2">
                <div class="belobog-celestial-icon">‚õìÔ∏è</div>
                <div class="belobog-celestial-label">Frostbound Seal</div>
                <div class="belobog-celestial-desc">
                    An icy sigil waiting for your resolve. (Mini-game WIP)
                </div>
            </div>

            <!-- 3: Celestial object placeholder for future mini-game -->
            <div id="belobog-celestial-3" class="belobog-celestial" data-minigame="trial-3">
                <div class="belobog-celestial-icon">‚≠ê</div>
                <div class="belobog-celestial-label">Stellar Choir</div>
                <div class="belobog-celestial-desc">
                    The stars hum a secret hymn. (Mini-game WIP)
                </div>
            </div>
        </div>

        <!-- Fill-in-the-blank mini-game overlay (1st celestial object) -->
        <div id="belobog-fill-game" class="belobog-fill-container">
            <div class="belobog-fill-title">Belobog Oath ‚Äî Fill in the Blank</div>
            <div class="belobog-fill-layout">
                <!-- Left: options as context clues -->
                <div class="belobog-fill-options">
                    <div class="belobog-fill-options-title">Choose the right word:</div>
                    <button class="belobog-fill-option" data-word="light">light</button>
                    <button class="belobog-fill-option" data-word="queen">queen</button>
                    <button class="belobog-fill-option" data-word="angel">angel</button>
                </div>

                <!-- Right: sentence with explicit blank and input -->
                <div class="belobog-fill-right">
                    <div class="belobog-fill-prompt">
                        Within these castle walls, amid frost and fire, you whisper:<br/>
                        ‚ÄúYou are my <span class="belobog-fill-blank">______</span> among the stars.‚Äù
                    </div>
                    <input
                        id="belobog-fill-input"
                        class="belobog-fill-input"
                        type="text"
                        placeholder="Type or click an option on the left..."
                    />
                    <button id="belobog-fill-submit" class="belobog-fill-button">Lock In Oath</button>
                    <div id="belobog-fill-feedback" class="belobog-fill-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Fill-in-the-blank mini-game 2 (Frostbound Seal) -->
        <div id="belobog-fill-game-2" class="belobog-fill-container">
            <div class="belobog-fill-title">Frostbound Seal ‚Äî Fill in the Blank</div>
            <div class="belobog-fill-layout">
                <div class="belobog-fill-options">
                    <div class="belobog-fill-options-title">Choose the right word:</div>
                    <button class="belobog-fill-option-2" data-word="warmth">warmth</button>
                    <button class="belobog-fill-option-2" data-word="strength">strength</button>
                    <button class="belobog-fill-option-2" data-word="hope">hope</button>
                </div>

                <div class="belobog-fill-right">
                    <div class="belobog-fill-prompt">
                        Through the frozen winds and endless night, I declare:<br/>
                        "Your presence is my <span class="belobog-fill-blank-2">______</span> in the cold."
                    </div>
                    <input
                        id="belobog-fill-input-2"
                        class="belobog-fill-input"
                        type="text"
                        placeholder="Type or click an option on the left..."
                    />
                    <button id="belobog-fill-submit-2" class="belobog-fill-button">Lock In Seal</button>
                    <div id="belobog-fill-feedback-2" class="belobog-fill-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Fill-in-the-blank mini-game 3 (Stellar Choir) -->
        <div id="belobog-fill-game-3" class="belobog-fill-container">
            <div class="belobog-fill-title">Stellar Choir ‚Äî Fill in the Blank</div>
            <div class="belobog-fill-layout">
                <div class="belobog-fill-options">
                    <div class="belobog-fill-options-title">Choose the right word:</div>
                    <button class="belobog-fill-option-3" data-word="forever">forever</button>
                    <button class="belobog-fill-option-3" data-word="always">always</button>
                    <button class="belobog-fill-option-3" data-word="eternally">eternally</button>
                </div>

                <div class="belobog-fill-right">
                    <div class="belobog-fill-prompt">
                        As the stars sing their ancient hymn, I vow:<br/>
                        "I will love you <span class="belobog-fill-blank-3">______</span>, across all worlds."
                    </div>
                    <input
                        id="belobog-fill-input-3"
                        class="belobog-fill-input"
                        type="text"
                        placeholder="Type or click an option on the left..."
                    />
                    <button id="belobog-fill-submit-3" class="belobog-fill-button">Lock In Vow</button>
                    <div id="belobog-fill-feedback-3" class="belobog-fill-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Belobog mission status window: collapsible dropdown for organized status -->
        <div id="belobog-mission-panel" class="belobog-mission-panel">
            <button id="belobog-mission-toggle" class="mission-toggle">
                <span class="mission-toggle-label">Belobog Mission & Ticket Status</span>
                <span id="belobog-mission-pill" class="mission-pill mission-pill-pending">Incomplete</span>
                <span class="mission-toggle-icon">‚åµ</span>
            </button>
            <div id="belobog-mission-content" class="mission-content">
                <div class="mission-section">
                    <div class="mission-section-title">World Brief</div>
                    <div class="mission-line">
                        <span class="label">Current World</span>
                        <span class="value">Belobog ‚Äî Castle Hall</span>
                    </div>
                    <div class="mission-line">
                        <span class="label">Main Trial</span>
                        <span class="value">Belobog Oath ‚Äî Fill in the Blank</span>
                    </div>
                    <div class="mission-line">
                        <span class="label">Status</span>
                        <span id="belobog-mission-status" class="value status-pending">
                            Incomplete ‚Äî Clear the Oath Script relic.
                        </span>
                    </div>
                </div>

                <div class="mission-section">
                    <div class="mission-section-title">Ticket Requirements</div>
                    <ul class="mission-list">
                        <li>Complete the Belobog Oath Script with the true word.</li>
                        <li>Illuminate the castle seal to prove your resolve.</li>
                    </ul>
                </div>

                <div class="mission-section">
                    <div class="mission-section-title">Next Planet Ticket</div>
                    <div class="ticket-preview">
                        <div class="ticket-label">Xianzhou Luofu Boarding Pass</div>
                        <div class="ticket-card locked">
                            <div class="ticket-world">Xianzhou Luofu</div>
                            <div class="ticket-note">Locked ‚Äî Finish Belobog mission to attune this ticket.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="portal-ui">
            <button id="back-to-planets" class="portal-back-btn">Back to Planet Selection</button>
            <div id="destination-label" class="mini-label">Belobog Castle Portal initialized.</div>
        </div>

        <div class="belobog-minigame-placeholder">
            Choose a celestial relic. The first begins your oath with a fill-in-the-blank trial.
        </div>
    </div>

    <!-- Xianzhou Luofu portal (shattered mirror memories) -->
    <div id="xianzhou-portal" class="planet-portal xianzhou-mirror" style="display: none;">

        <!-- Back to planet selection: top-left revert icon -->
        <button id="xianzhou-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <!-- Dimmed core so it feels like the door frame for the mirror wall -->
        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Glass shard field -->
        <div class="xianzhou-glass-layer">
            <div class="glass-shard" data-memory="I love being with you."></div>
            <div class="glass-shard" data-memory="You make every station feel like home."></div>
            <div class="glass-shard" data-memory="Your laughter is my favorite signal."></div>
            <div class="glass-shard" data-memory="I‚Äôd reroute the Astral Express just to see you smile."></div>
            <div class="glass-shard" data-memory="Holding your hand feels like a perfect timeline."></div>
            <div class="glass-shard" data-memory="Every goodbye is only a countdown to our next hello."></div>
            <div class="glass-shard" data-memory="You are my safe carriage in every storm."></div>
            <div class="glass-shard" data-memory="I choose you in every universe."></div>

            <!-- More generic shards to make the mirror feel shattered -->
            <div class="glass-shard" data-memory="You are the warmth between cold stars."></div>
            <div class="glass-shard" data-memory="You‚Äôre the soft pause between my battles."></div>
            <div class="glass-shard" data-memory="You are my favorite anomaly."></div>
            <div class="glass-shard" data-memory="With you, time feels infinite."></div>
            <div class="glass-shard" data-memory="Your smile is my constellation."></div>
            <div class="glass-shard" data-memory="You are my anchor in the void."></div>
            <div id="xianzhou-red-shard" class="glass-shard red-shard" data-memory=""></div>
        </div>

        <!-- Portal UI for Xianzhou -->
        <div class="portal-ui xianzhou-ui">
            <div id="xianzhou-label" class="mini-label">
                Shattered reflections of us ‚Äî each shard holds a quiet memory.
            </div>
        </div>
    </div>

    <!-- Jarilo-VI portal (frozen world) -->
    <div id="jarilo-portal" class="planet-portal jarilo-frozen" style="display: none;">
        <button id="jarilo-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Frozen landscape -->
        <div class="frozen-content">
            <div class="jarilo-title">Jarilo-VI - Frozen Memory</div>
            <div class="jarilo-message">
                Collect the frozen fragments to restore the memory.
            </div>

            <!-- Puzzle frame in center - 3x3 grid -->
            <div class="puzzle-frame">
                <div class="puzzle-grid-container">
                    <div class="puzzle-slot" data-position="1"></div>
                    <div class="puzzle-slot" data-position="2"></div>
                    <div class="puzzle-slot" data-position="3"></div>
                    <div class="puzzle-slot" data-position="4"></div>
                    <div class="puzzle-slot" data-position="5"></div>
                    <div class="puzzle-slot" data-position="6"></div>
                    <div class="puzzle-slot" data-position="7"></div>
                    <div class="puzzle-slot" data-position="8"></div>
                    <div class="puzzle-slot" data-position="9"></div>
                </div>
                <div class="puzzle-counter">
                    <span id="pieces-collected">0</span> / 9
                </div>
            </div>

            <!-- Scattered draggable puzzle pieces with Elysia image parts -->
            <div class="puzzle-piece" data-piece="1" data-position="1" draggable="true" style="top: 8%; left: 5%;"></div>
            <div class="puzzle-piece" data-piece="2" data-position="2" draggable="true" style="top: 12%; right: 7%;"></div>
            <div class="puzzle-piece" data-piece="3" data-position="3" draggable="true" style="top: 30%; left: 2%;"></div>
            <div class="puzzle-piece" data-piece="4" data-position="4" draggable="true" style="top: 38%; right: 4%;"></div>
            <div class="puzzle-piece" data-piece="5" data-position="5" draggable="true" style="top: 60%; left: 6%;"></div>
            <div class="puzzle-piece" data-piece="6" data-position="6" draggable="true" style="top: 68%; right: 8%;"></div>
            <div class="puzzle-piece" data-piece="7" data-position="7" draggable="true" style="bottom: 12%; left: 10%;"></div>
            <div class="puzzle-piece" data-piece="8" data-position="8" draggable="true" style="bottom: 8%; right: 12%;"></div>
            <div class="puzzle-piece" data-piece="9" data-position="9" draggable="true" style="top: 48%; left: 1%;"></div>

            <div class="snowflakes">
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
            </div>
        </div>

        <div class="portal-ui">
            <div id="jarilo-label" class="mini-label">
                Welcome to the frozen world of Jarilo-VI.
            </div>
        </div>
    </div>

    <!-- Herta Station portal (tech/research facility) -->
    <div id="herta-portal" class="planet-portal herta-station" style="display: none;">
        <button id="herta-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Tech interface -->
        <div class="herta-content">
            <div class="herta-title">Herta Station</div>
            <div class="herta-subtitle">Dimensional Research Lab</div>

            <!-- Portal Button on Left -->
            <button id="dimension-portal-btn" class="dimension-portal-btn">
                <div class="portal-icon">üîç</div>
                <div class="portal-text">Find</div>
            </button>

            <!-- Incomplete Puzzle -->
            <div class="research-puzzle">
                <div class="puzzle-title">DIMENSIONAL FRAGMENT ANALYSIS</div>
                <div class="incomplete-puzzle-grid">
                    <div class="research-piece filled">1</div>
                    <div class="research-piece filled">2</div>
                    <div class="research-piece filled">3</div>
                    <div class="research-piece filled">4</div>
                    <div class="research-piece missing">?</div>
                    <div class="research-piece filled">6</div>
                    <div class="research-piece filled">7</div>
                    <div class="research-piece filled">8</div>
                    <div class="research-piece filled">9</div>
                </div>
                <div class="puzzle-status">
                    <span id="herta-puzzle-status">Fragment 5 missing - Enter dimension to retrieve</span>
                </div>
            </div>
        </div>

        <!-- Dimension Portal Overlay -->
        <div id="dimension-space" class="dimension-space" style="display: none;">
            <button id="dimension-back-btn" class="dimension-back-btn">‚Üê Exit Dimension</button>
            
            <div class="dimension-title">Dimensional Rift</div>
            <div class="dimension-message">Find the missing fragment among the chaos...</div>
            
            <!-- Lots of floating objects -->
            <div class="floating-object" style="top: 10%; left: 15%;">üì¶</div>
            <div class="floating-object" style="top: 15%; left: 45%;">‚≠ê</div>
            <div class="floating-object" style="top: 20%; right: 20%;">üîÆ</div>
            <div class="floating-object" style="top: 25%; left: 70%;">üíé</div>
            <div class="floating-object" style="top: 35%; left: 10%;">üåÄ</div>
            <div class="floating-object" style="top: 40%; right: 15%;">‚öôÔ∏è</div>
            <div class="floating-object" style="top: 45%; left: 55%;">üéØ</div>
            <div class="floating-object" style="top: 50%; left: 25%;">üî∑</div>
            <div class="floating-object" style="top: 55%; right: 40%;">‚ú®</div>
            <div class="floating-object" style="top: 60%; left: 80%;">üåü</div>
            <div class="floating-object" style="top: 65%; left: 35%;">üí´</div>
            <div class="floating-object" style="top: 70%; right: 25%;">üî∂</div>
            <div class="floating-object" style="top: 75%; left: 60%;">üé≤</div>
            <div class="floating-object" style="top: 80%; left: 20%;">üß©</div>
            <div class="floating-object" style="top: 85%; right: 50%;">üé®</div>
            
            <!-- The actual missing piece disguised as an object -->
            <div id="missing-piece" class="floating-object hidden-piece" style="top: 42%; left: 38%;">üî∏</div>
            
            <!-- More objects -->
            <div class="floating-object" style="top: 12%; right: 35%;">üî∫</div>
            <div class="floating-object" style="top: 30%; left: 5%;">üîª</div>
            <div class="floating-object" style="top: 48%; right: 8%;">‚¨°</div>
            <div class="floating-object" style="top: 68%; left: 12%;">‚¨¢</div>
            <div class="floating-object" style="top: 78%; right: 18%;">‚óÜ</div>
        </div>

        <div class="portal-ui">
            <div id="herta-label" class="mini-label">
                Advanced research facility of the Genius Society.
            </div>
        </div>
    </div>

    <!-- Luofu Sanctum portal (nature/autumn theme) -->
    <div id="luofu-portal" class="planet-portal luofu-sanctum" style="display: none;">
        <button id="luofu-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Nature scene -->
        <div class="luofu-content">
            <div class="luofu-title">Luofu Sanctum</div>
            <div class="luofu-subtitle">Sacred Riverbank</div>

            <!-- Falling leaves -->
            <div class="falling-leaves">
                <div class="leaf">üçÇ</div>
                <div class="leaf">üçÅ</div>
                <div class="leaf">üçÇ</div>
                <div class="leaf">üçÅ</div>
                <div class="leaf">üçÇ</div>
                <div class="leaf">üçÅ</div>
                <div class="leaf">üçÇ</div>
                <div class="leaf">üçÅ</div>
            </div>

            <!-- River -->
            <div class="river">
                <div class="water-ripple"></div>
                <div class="water-ripple"></div>
                <div class="water-ripple"></div>
            </div>

            <!-- Nature elements -->
            <div class="nature-scene">
                <div class="tree">üå≥</div>
                <div class="tree">üå≤</div>
                <div class="flowers">üå∏</div>
                <div class="flowers">üå∫</div>
            </div>

            <div class="luofu-message">
                Cross the sacred river by following the path of stones.<br/>
                Remember the sequence to reach the other side.
            </div>

            <!-- River Stone Stepping Game -->
            <div class="stone-game">
                <div class="game-title">Sacred River Crossing</div>
                <div class="game-instructions">Watch the stones light up, then repeat the pattern!</div>
                
                <div class="river-stones">
                    <div class="stepping-stone" data-stone="1">
                        <div class="stone-ripple"></div>
                    </div>
                    <div class="stepping-stone" data-stone="2">
                        <div class="stone-ripple"></div>
                    </div>
                    <div class="stepping-stone" data-stone="3">
                        <div class="stone-ripple"></div>
                    </div>
                    <div class="stepping-stone" data-stone="4">
                        <div class="stone-ripple"></div>
                    </div>
                    <div class="stepping-stone" data-stone="5">
                        <div class="stone-ripple"></div>
                    </div>
                    <div class="stepping-stone" data-stone="6">
                        <div class="stone-ripple"></div>
                    </div>
                </div>

                <button id="start-crossing" class="start-btn">Start Crossing</button>
                <div id="stone-feedback" class="stone-feedback"></div>
                <div class="stone-progress">
                    Round: <span id="stone-round">1</span> / 3
                </div>
            </div>
        </div>

        <div class="portal-ui">
            <div id="luofu-label" class="mini-label">
                Welcome to the peaceful Luofu Sanctum.
            </div>
        </div>
    </div>

    <!-- Stellaron portal (villain/dark theme) -->
    <div id="stellaron-portal" class="planet-portal stellaron-dark" style="display: none;">
        <button id="stellaron-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <!-- Dark villain atmosphere -->
        <div class="stellaron-content">
            <div class="stellaron-title">STELLARON</div>
            <div class="stellaron-subtitle">Corrupted Core</div>



            <!-- Dark energy particles -->
            <div class="dark-particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>

            <!-- Ominous eye/core -->
            <div class="evil-core">
                <div class="core-eye"></div>
                <div class="core-pulse"></div>
            </div>

            <div class="stellaron-message">
                Escape the shadow maze before the darkness consumes you.<br/>
                Only a small light guides your way...
            </div>

            <!-- Shadow Maze Game -->
            <div class="shadow-maze-game">
                <div class="maze-title">SHADOW MAZE</div>
                <button id="start-maze" class="maze-start-btn">Enter the Darkness</button>
                
                <div id="maze-container" class="maze-container" style="display: none;">
                    <canvas id="maze-canvas" width="500" height="500"></canvas>
                    <div id="maze-light" class="maze-light"></div>
                    <div id="maze-status" class="maze-status">Find the exit...</div>
                </div>
            </div>
        </div>

        <div class="portal-ui">
            <div id="stellaron-label" class="mini-label">
                Beware the corrupted Stellaron...
            </div>
        </div>
    </div>

    <!-- Penacony portal -->
    <div id="penacony-portal" class="planet-portal penacony-casino" style="display: none;">
        <!-- Back to planet selection: top-left revert icon -->
        <button id="penacony-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <div class="portal-backdrop">
            <div class="portal-core"></div>
            <div class="portal-ring outer"></div>
            <div class="portal-ring inner"></div>
        </div>

        <div class="penacony-content">
            <div class="penacony-title">Penacony - Dream Casino</div>
            
            <!-- Slot Machine -->
            <div class="slot-machine">
                <div class="slot-machine-top"></div>
                <div class="slot-machine-body">
                    <div class="slot-display">
                        <div id="slot-equation" class="slot-equation">Press Start</div>
                    </div>
                    <div class="slot-lever"></div>
                </div>
                <button id="slot-start-btn" class="slot-start-btn">START</button>
            </div>

            <!-- Coin Stack (right side) -->
            <div class="coin-stack">
                <div class="coin-label">Select Answer:</div>
                <div id="coin-container" class="coin-container">
                    <!-- Coins will be generated by JavaScript -->
                </div>
            </div>

            <div id="penacony-feedback" class="penacony-feedback"></div>

            <!-- Ticket Shards Collection -->
            <div class="ticket-shards-container">
                <div class="ticket-shards-label">Ticket Shards:</div>
                <div class="ticket-shards">
                    <div id="shard-1" class="ticket-shard locked">
                        <div class="shard-number">1</div>
                    </div>
                    <div id="shard-2" class="ticket-shard locked">
                        <div class="shard-number">2</div>
                    </div>
                    <div id="shard-3" class="ticket-shard locked">
                        <div class="shard-number">3</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="portal-ui">
            <div id="penacony-label" class="mini-label">
                Test your luck and wit in the Dream Casino.
            </div>
        </div>
    </div>

    <!-- Terminus portal (final lobby with door) -->
    <div id="terminus-portal" class="planet-portal terminus-lobby" style="display: none;">
        <button id="terminus-back-planets" class="portal-back-icon" aria-label="Back to planet selection">
            ‚¨Ö
        </button>

        <!-- Lobby atmosphere -->
        <div class="terminus-content">
            <div class="terminus-title">TERMINUS</div>
            <div class="terminus-subtitle">The Final Threshold</div>

            <!-- Elegant lobby room -->
            <div class="lobby-room">
                <!-- Floor tiles -->
                <div class="lobby-floor"></div>
                
                <!-- Walls with ambient lighting -->
                <div class="lobby-walls">
                    <div class="wall-light left"></div>
                    <div class="wall-light right"></div>
                </div>

                <!-- The mysterious door -->
                <div class="mysterious-door" id="terminus-door">
                    <div class="door-frame">
                        <div class="door-panel">
                            <div class="door-handle"></div>
                            <div class="door-glow"></div>
                        </div>
                        <div class="door-inscription">Beyond lies the truth...</div>
                    </div>
                </div>

                <!-- Ambient particles -->
                <div class="lobby-particles">
                    <div class="light-particle"></div>
                    <div class="light-particle"></div>
                    <div class="light-particle"></div>
                    <div class="light-particle"></div>
                </div>
            </div>

            <div class="terminus-message">
                You stand before the final door.<br/>
                All your trials have led to this moment.
            </div>
        </div>

        <div class="portal-ui">
            <div id="terminus-label" class="mini-label">
                The journey's end awaits beyond this threshold.
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
